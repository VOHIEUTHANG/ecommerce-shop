<html lang="en">
   <head>
      <%- include('../partials/head'); %>
      <title>ALL PRODUCTS</title>
      <link rel="stylesheet" href="/css/all-product.css" />
   </head>
   <body>
      <div id="root">
         <%- include('../partials/header',{user,isLoggedIn}) %>
         <div id="main">
            <div class="all-product">
               <div class="shop-page-wrapper">
                  <div class="container">
                     <div class="row gx-5">
                        <div class="col-lg-3" id="sticky-parent">
                           <div class="shop-sidebar" id="sticky-element">
                              <div class="sidebar-widget mb-50">
                                 <h3 class="sidebar-title">Tìm kiếm</h3>
                                 <div class="sidebar-search">
                                    <form action="#">
                                       <input placeholder="Jordan..." type="text" />
                                       <button><i class="ti-search"></i></button>
                                    </form>
                                 </div>
                              </div>
                              <div class="sidebar-widget mb-40">
                                 <h3 class="sidebar-title">Lọc theo giá</h3>
                                 <div class="price_filter">
                                    <div id="slider-range"></div>
                                    <div class="price_slider_amount">
                                       <div class="label-input">
                                          <div class="amount-range-slider"></div>
                                       </div>
                                       <label>
                                          <span id="start-price">1.000.000 VND</span> -
                                          <span id="end-price">10.000.000 VND</span>
                                       </label>
                                    </div>
                                 </div>
                              </div>
                              <div class="sidebar-widget mb-45">
                                 <h3 class="sidebar-title">Danh mục</h3>
                                 <div class="sidebar-categories">
                                    <ul>
                                       <li>
                                          <a href="#">Sneaker <span>4</span></a>
                                       </li>
                                       <li>
                                          <a href="#">Boots <span>9</span></a>
                                       </li>
                                       <li>
                                          <a href="#">sandals <span>5</span> </a>
                                       </li>
                                       <li>
                                          <a href="#">Giày tây <span>3</span></a>
                                       </li>
                                    </ul>
                                 </div>
                              </div>
                              <div class="sidebar-widget mb-40">
                                 <h3 class="sidebar-title">size</h3>
                                 <div class="product-size">
                                    <ul>
                                       <li class="size-item"><a href="#">38</a></li>
                                       <li class="size-item"><a href="#">39</a></li>
                                       <li class="size-item"><a href="#">40</a></li>
                                       <li class="size-item"><a href="#">41</a></li>
                                       <li class="size-item"><a href="#">42</a></li>
                                       <li class="size-item"><a href="#">43</a></li>
                                       <li class="size-item"><a href="#">44</a></li>
                                       <li class="size-item"><a href="#">45</a></li>
                                    </ul>
                                 </div>
                              </div>
                           </div>
                        </div>
                        <div class="col-lg-9">
                           <div class="shop-product-wrapper">
                              <div class="shop-bar-area">
                                 <div class="shop-bar pb-60">
                                    <div class="shop-found-selector">
                                       <div class="shop-found">
                                          <p>
                                             <span><%= productList.products.length %></span> Product Found of
                                             <span><%= productList.total %></span>
                                          </p>
                                       </div>
                                       <div class="shop-selector">
                                          <span class="nowrap">Sắp xếp: </span>
                                          <select class="form-select sort-select" aria-label="Default select example">
                                             <option selected>Mặc định</option>
                                             <option value="1">Giá thấp -> cao</option>
                                             <option value="2">Giá cao -> Thấp</option>
                                          </select>
                                       </div>
                                    </div>
                                 </div>
                                 <div class="shop-product-content tab-content">
                                    <div id="grid-sidebar7" class="tab-pane fade active show">
                                       <div class="row">
                                          <% if(productList.products.length > 0) { %> <%
                                          productList.products.forEach(product=>{ %>
                                          <div class="col-lg-4 col-md-6">
                                             <div class="product-wrapper product-box-style mb-30">
                                                <div class="product-img">
                                                   <a href="/product/<%= product.slug%>">
                                                      <img src="<%= product.product_images %>" alt="" />
                                                   </a>
                                                   <div class="product-action">
                                                      <a class="animate-left" title="Wishlist" href="#">
                                                         <i class="fa-regular fa-heart"></i>
                                                      </a>
                                                      <a class="animate-right" title="Add To Cart" href="#">
                                                         <i class="ti-shopping-cart"></i>
                                                      </a>
                                                   </div>
                                                </div>
                                                <div class="product-content">
                                                   <h4>
                                                      <a href="/product/<%= product.slug %>"><%= product.name %></a>
                                                   </h4>
                                                   <span><%= product.price %></span>
                                                </div>
                                             </div>
                                          </div>
                                          <% }) %> <% } %>
                                       </div>
                                    </div>
                                    <div id="grid-sidebar8" class="tab-pane fade">
                                       <div class="row">
                                          <div class="col-lg-12">
                                             <div
                                                class="product-wrapper mb-30 single-product-list product-list-right-pr mb-60"
                                             >
                                                <div class="product-img list-img-width">
                                                   <a href="#">
                                                      <img
                                                         src="https://cdn.shopify.com/s/files/1/0603/3031/1875/products/main-square_e6cc4d63-d366-45dc-ab50-514a07a11358_large.jpg?v=1656739225"
                                                         alt=""
                                                      />
                                                   </a>
                                                   <span>hot</span>
                                                   <div class="product-action-list-style">
                                                      <a
                                                         class="animate-right"
                                                         title="Quick View"
                                                         data-toggle="modal"
                                                         data-target="#exampleModal"
                                                         href="#"
                                                      >
                                                         <i class="fa-regular fa-eye"></i>
                                                      </a>
                                                   </div>
                                                </div>
                                                <div class="product-content-list">
                                                   <div class="product-list-info">
                                                      <h4><a href="#">Homme Tapered Smart </a></h4>
                                                      <span>$150.00</span>
                                                      <p>
                                                         Lorem ipsum dolor sit amet, mana consectetur adipisicing elit,
                                                         sed do eiusmod tempor labore.
                                                      </p>
                                                   </div>
                                                   <div class="product-list-cart-wishlist">
                                                      <div class="product-list-cart">
                                                         <a class="btn-hover list-btn-style" href="#">add to cart</a>
                                                      </div>
                                                      <div class="product-list-wishlist">
                                                         <a class="btn-hover list-btn-wishlist" href="#">
                                                            <i class="fa-regular fa-heart"></i>
                                                         </a>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                          <div class="col-lg-12">
                                             <div
                                                class="product-wrapper mb-30 single-product-list product-list-right-pr mb-60"
                                             >
                                                <div class="product-img list-img-width">
                                                   <a href="#">
                                                      <img src="assets/img/product/fashion-colorful/2.jpg" alt="" />
                                                   </a>
                                                   <div class="product-action-list-style">
                                                      <a
                                                         class="animate-right"
                                                         title="Quick View"
                                                         data-toggle="modal"
                                                         data-target="#exampleModal"
                                                         href="#"
                                                      >
                                                         <i class="fa-regular fa-eye"></i>
                                                      </a>
                                                   </div>
                                                </div>
                                                <div class="product-content-list">
                                                   <div class="product-list-info">
                                                      <h4><a href="#">Denim Stonewash</a></h4>
                                                      <span>$180.00</span>
                                                      <p>
                                                         Lorem ipsum dolor sit amet, mana consectetur adipisicing elit,
                                                         sed do eiusmod tempor labore.
                                                      </p>
                                                   </div>
                                                   <div class="product-list-cart-wishlist">
                                                      <div class="product-list-cart">
                                                         <a class="btn-hover list-btn-style" href="#">add to cart</a>
                                                      </div>
                                                      <div class="product-list-wishlist">
                                                         <a class="btn-hover list-btn-wishlist" href="#">
                                                            <i class="fa-regular fa-heart"></i>
                                                         </a>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                          <div class="col-lg-12">
                                             <div
                                                class="product-wrapper mb-30 single-product-list product-list-right-pr mb-60"
                                             >
                                                <div class="product-img list-img-width">
                                                   <a href="#">
                                                      <img src="assets/img/product/fashion-colorful/3.jpg" alt="" />
                                                   </a>
                                                   <div class="product-action-list-style">
                                                      <a
                                                         class="animate-right"
                                                         title="Quick View"
                                                         data-toggle="modal"
                                                         data-target="#exampleModal"
                                                         href="#"
                                                      >
                                                         <i class="fa-regular fa-eye"></i>
                                                      </a>
                                                   </div>
                                                </div>
                                                <div class="product-content-list">
                                                   <div class="product-list-info">
                                                      <h4><a href="#">Mini Waffle 5 Pack</a></h4>
                                                      <span>$130.00</span>
                                                      <p>
                                                         Lorem ipsum dolor sit amet, mana consectetur adipisicing elit,
                                                         sed do eiusmod tempor labore.
                                                      </p>
                                                   </div>
                                                   <div class="product-list-cart-wishlist">
                                                      <div class="product-list-cart">
                                                         <a class="btn-hover list-btn-style" href="#">add to cart</a>
                                                      </div>
                                                      <div class="product-list-wishlist">
                                                         <a class="btn-hover list-btn-wishlist" href="#">
                                                            <i class="fa-regular fa-heart"></i>
                                                         </a>
                                                      </div>
                                                   </div>
                                                </div>
                                             </div>
                                          </div>
                                       </div>
                                    </div>
                                 </div>
                              </div>
                           </div>
                           <div class="pagination-style mt-10 text-center">
                              <ul>
                                 <li>
                                    <a href="#"><i class="ti-angle-left"></i></a>
                                 </li>
                                 <li><a href="#">1</a></li>
                                 <li><a href="#">2</a></li>
                                 <li><a href="#">...</a></li>
                                 <li><a href="#">19</a></li>
                                 <li class="active">
                                    <a href="#"><i class="ti-angle-right"></i></a>
                                 </li>
                              </ul>
                           </div>
                        </div>
                     </div>
                  </div>
               </div>
            </div>
         </div>
         <%- include('../partials/footer') %>
      </div>
      <%- include('../partials/foot') %>
      <script>
         const stickyElement = $('#sticky-element');
         const stickyParent = $('#sticky-parent');
         const headerHeight = $('.header')[0].offsetHeight;
         const screenHeight = window.screen.height;
         const footer = $('#footer');
         let isFixedSidebar = false;
         let fixedTranformValue = 0;

         $(document).on('scroll', () => {
            const { top: parentStickyTop } = stickyParent[0].getBoundingClientRect();
            const { top: footerTop } = footer[0].getBoundingClientRect();

            let tranformTopValue;
            if (parentStickyTop <= headerHeight) {
               tranformTopValue = headerHeight - parentStickyTop;
            } else {
               tranformTopValue = 0;
            }

            stickyElement.css({
               transform: `translateY(${tranformTopValue}px)`,
            });

            if (footerTop <= screenHeight) {
               if (isFixedSidebar == false) {
                  fixedTranformValue = tranformTopValue;
               }
               isFixedSidebar = true;
               stickyElement.css({
                  transform: `translateY(${fixedTranformValue}px)`,
               });
            }
         });
      </script>
      <script type="module">
         import { formatToCurrency } from '/js/utils/index.js';
         rangeSlider(document.querySelector('.amount-range-slider'), {
            min: 0,
            max: 200,
            value: [10, 100],
            onInput: function (valueSet) {
               const startPrice = $('#start-price');
               const endPrice = $('#end-price');
               startPrice.text(formatToCurrency(valueSet[0] * 100000));
               endPrice.text(formatToCurrency(valueSet[1] * 100000));
            },
         });
      </script>
   </body>
</html>
