<!-- LIBRARY -->
<script src="/js/library/swipper.min.js"></script>
<script src="/js/library/boostrap.min.js"></script>
<script src="/js/library/justValidate.min.js"></script>
<script src="/js/library/axios.min.js"></script>
<script src="/js/library/popper.min.js"></script>
<script src="/js/library/tippy.min.js"></script>
<script src="/js/library/toastr.min.js"></script>
<script src="/js/library/rangeslider.min.js"></script>
<!-- GLOBAL LOGIC -->
<script src="/js/global.js"></script>
<script type="module">
   import { localStorage } from '/js/utils/index.js';

   if (localStorage.getStore()) {
      const { refreshToken } = localStorage.getStore();
      const logoutBtn = $('.user-options__item.logout');
      logoutBtn.click(async () => {
         console.log('logout clicked !');
         const payload = { refreshToken };
         const { data, status } = await axios.delete('/api/user/logout', { data: payload });
         if (data.status === 'success' && status === 200) {
            localStorage.clearStore();
            window.location.href = '/';
         } else {
            const { status, message } = data;
            toastr[status](message);
         }
      });
   } else {
      console.log('Missing refresh token to logout!');
   }
</script>
<!-- <script type="module">
   import { localStorage, responseHandler, configHeaders, refreshTokenHandler } from '/js/utils/index.js';
   const tokens = localStorage.getStore();
   if (tokens) {
      const { accessToken } = tokens;
      const profileBtn = $('#user-profile');
      profileBtn.click(async () => {
         axios
            .get('/profile', configHeaders(accessToken, 'application/json;charset=UTF-8'))
            .then((res) => {
               console.log('res', res);
            })
            .catch(async (error) => {
               console.log('error', error);
               // const newToken = await refreshTokenHandler(error.response.status);
               // axios.get('/profile', configHeaders(newToken));
            });
         // console.log('getProfilePageResult', getProfilePageResult);
         // const handleSuccess = (data) => {
         //    console.log('success');
         //    console.log(data);
         // };
         // const result = await refreshTokenHandler(getProfilePageResult, handleSuccess);
         // if (typeof result === 'string') {
         //    const getProfilePageResult = await axios.get('/profile', {}, configHeaders(result));
         //    responseHandler(getProfilePageResult, handleSuccess);
         // }
      });
   } else {
      console.log('Missing access tokens !');
   }
</script> -->
